#include <porphyrin.h>

VSAPI api{
    createCore,
    freeCore,
    getCoreInfo,
    cloneFrameRef,
    cloneNodeRef,
    cloneFuncRef,
    freeFrame,
    freeNode,
    freeFunc,
    newVideoFrame,
    copyFrame,
    copyFrameProps,
    registerFunction,
    getPluginById,
    getPluginByNs,
    getPlugins,
    getFunctions,
    createFilter,
    setError,
    getError,
    setFilterError,
    invoke,
    getFormatPreset,
    registerFormat,
    getFrame,
    getFrameAsync,
    getFrameFilter,
    requestFrameFilter,
    queryCompletedFrame,
    releaseFrameEarly,
    getStride,
    getReadPtr,
    getWritePtr,
    createFunc,
    callFunc,
    createMap,
    freeMap,
    clearMap,
    getVideoInfo,
    setVideoInfo,
    getFrameFormat,
    getFrameWidth,
    getFrameHeight,
    getFramePropsRO,
    getFramePropsRW,
    propNumKeys,
    propGetKey,
    propNumElements,
    propGetType,
    propGetInt,
    propGetFloat,
    propGetData,
    propGetDataSize,
    propGetNode,
    propGetFrame,
    propGetFunc,
    propDeleteKey,
    propSetInt,
    propSetFloat,
    propSetData,
    propSetNode,
    propSetFrame,
    propSetFunc,
    setMaxCacheSize,
    getOutputIndex,
    newVideoFrame2,
    setMessageHandler,
    setThreadCount,
    getPluginPath,
    propGetIntArray,
    propGetFloatArray,
    propSetIntArray,
    propSetFloatArray,
    logMessage,
    addMessageHandler,
    removeMessageHandler,
    getCoreInfo2,
};

VS_API(const VSAPI*) getVapourSynthAPI(int version) noexcept {
    return version == VAPOURSYNTH_API_VERSION ? &api : nullptr;
}
